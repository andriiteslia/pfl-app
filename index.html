<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light">
  <title>Predator Fest League</title>

  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- Theme initialization (before render to prevent flash) -->
  <script>
    (function() {
      try {
        var override = localStorage.getItem('theme_override');
        if (override === 'dark') {
          document.documentElement.setAttribute('data-theme', 'dark');
          return;
        }
        var tg = window.Telegram && window.Telegram.WebApp;
        if (tg && tg.colorScheme === 'dark') {
          document.documentElement.setAttribute('data-theme', 'dark');
        }
      } catch(e) {}
    })();
  </script>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="css/variables.css">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/tabs.css">
  <link rel="stylesheet" href="css/leaderboard.css">
  <link rel="stylesheet" href="css/partners.css">
  <link rel="stylesheet" href="css/skeleton.css">
  <link rel="stylesheet" href="css/animations.css">
</head>
<body>

  <!-- App Container -->
  <div id="app-wrap">
    <main id="app-content">

      <!-- ========== FESTS TAB ========== -->
      <section id="tab-fests" class="tab-content active" aria-label="Fests tab">
        <header class="fests-header">
          <div class="fests-header__text">
            <h1 class="page-title">Fests üé£</h1>
            <p class="page-subtitle" id="subtitle-fests">–ê–∫—Ç—É–∞–ª—å–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏</p>
          </div>
          <div class="fests-header__actions">
            <button class="btn btn-theme" id="themeToggle" type="button" aria-label="Toggle theme">üåô</button>
            <button class="btn" id="reload" type="button"><span class="btn-label">–û–Ω–æ–≤–∏—Ç–∏</span></button>
          </div>
        </header>

        <div class="fests-year-tags" id="festsYearTags">
          <button class="fests-year-tag" data-year="2026">2026</button>
          <button class="fests-year-tag active" data-year="2025">2025</button>
        </div>

        <!-- ===== 2026 Fests ===== -->
        <div id="festsYear2026" class="fests-year-panel" style="display: none;">
          <div class="empty-state" id="yearLoader2026">
            <img src="./assets/imgs/perch.png" alt="Perch" width="160" height="160">
            <p class="empty-state__text" id="yearLoader2026Text">–ó–∞—á–µ–∫–∞–π—Ç–µ –±—É–¥—å –ª–∞—Å–∫–∞,<br>–æ–Ω–æ–≤–ª—é—é –¥–∞–Ω—ñ...</p>
          </div>
          <div id="fests2026Container"></div>
        </div>

        <!-- ===== 2025 Fests ===== -->
        <div id="festsYear2025" class="fests-year-panel">
          
          <!-- PERCH MASTER -->
          <article class="card">
            <div class="table-header" id="tableHeaderPerch">
              <div class="table-header__text">
                <div class="card-title" style="font-weight:800;">PERCH MASTER</div>
                <div style="font-size:15px; color:var(--muted);">–ú–∞–π–¥–∞–Ω, –ß–∞—Ä—ñ–≤–Ω—ñ –û–∑–µ—Ä–∞ (07.12.25)</div>
                <div class="score-tag score-tag--personal">–û—Å–æ–±–∏—Å—Ç–∏–π –∑–∞–ª—ñ–∫ üí™</div>
              </div>
              <div class="chevron" id="chevronPerch">
                <svg class="chevron-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M6 9l6 6 6-6"/>
                </svg>
              </div>
            </div>
            <div class="segmented-control" id="segmentPerch" style="display: none;">
              <button class="segment active" type="button" data-view="results">–†–µ–∑—É–ª—å—Ç–∞—Ç–∏</button>
              <button class="segment" type="button" data-view="tours">–¢—É—Ä–∏</button>
            </div>
            <div id="outPerchResults" class="table-content table-collapsed"></div>
            <div id="outPerchTours" class="table-content table-collapsed"></div>
          </article>

          <!-- PREDATOR CUP 2025 -->
          <article class="card">
            <div class="table-header" id="tableHeaderPredator">
              <div class="table-header__text">
                <div class="card-title" style="font-weight:800;">PREDATOR CUP 2025</div>
                <div style="font-size:15px; color:var(--muted);">–î—ñ–¥–∏–ª—ñ–≤, –û–∑–µ—Ä–æ –î—ñ–¥–∏–ª—ñ–≤ (16.11.25)</div>
                <div class="score-tag score-tag--combo">–ö–æ–º–∞–Ω–¥–Ω–æ-–æ—Å–æ–±–∏—Å—Ç–∏–π –∑–∞–ª—ñ–∫ ü§ò</div>
              </div>
              <div class="chevron" id="chevronPredator">
                <svg class="chevron-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M6 9l6 6 6-6"/>
                </svg>
              </div>
            </div>
            <div class="segmented-control" id="segmentPredator" style="display: none;">
              <button class="segment active" type="button" data-view="personal">–û—Å–æ–±–∏—Å—Ç–∏–π</button>
              <button class="segment" type="button" data-view="team">–ö–æ–º–∞–Ω–¥–Ω–∏–π</button>
            </div>
            <div id="outPredatorPersonal" class="table-content table-collapsed"></div>
            <div id="outPredatorTeam" class="table-content table-collapsed"></div>
          </article>

          <!-- Predator 2025 -->
          <article class="card">
            <div class="table-header" id="tableHeaderPredator2">
              <div class="table-header__text">
                <div class="card-title" style="font-weight:800;">Predator 2025</div>
                <div style="font-size:15px; color:var(--muted);">–ú–∞–π–¥–∞–Ω, –ß–∞—Ä—ñ–≤–Ω—ñ –û–∑–µ—Ä–∞ (05.10.25)</div>
                <div class="score-tag score-tag--team">–ö–æ–º–∞–Ω–¥–Ω–∏–π –∑–∞–ª—ñ–∫ ü§úü§õ</div>
              </div>
              <div class="chevron" id="chevronPredator2">
                <svg class="chevron-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M6 9l6 6 6-6"/>
                </svg>
              </div>
            </div>
            <div id="outPredator2" class="table-content table-collapsed"></div>
          </article>

          <!-- Donation info -->
          <div style="margin-top:24px; margin-bottom:32px; font-size:16px; color:var(--muted); text-align:center;">
            –ü–µ—Ä–µ–¥–∞–Ω–æ –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏ –∑–±—Ä–æ–π–Ω–∏—Ö —Å–∏–ª ‚Äì <span style="white-space:nowrap;">29 500 –≥—Ä–Ω üá∫üá¶</span>
          </div>

          <!-- Badge -->
          <div style="margin-top:16px; margin-bottom:48px; display:flex; justify-content:center; align-items:center; height:40px;">
            <a href="https://t.me/andriiteslia" target="_blank" rel="noopener noreferrer" style="display:block; height:40px;">
              <img id="badgeImg" src="assets/imgs/badge_light.png" alt="badge" style="height:40px; width:auto; display:block;">
            </a>
          </div>
        </div>
      </section>

      <!-- ========== LEADERBOARD TAB ========== -->
      <section id="tab-leaderboard" class="tab-content" aria-label="Leaderboard tab">
        <header class="fests-header">
          <div class="fests-header__text">
            <h1 class="page-title">Leaderboard üèÜ</h1>
            <p class="page-subtitle" id="subtitle-leaderboard">
              –†–µ–π—Ç–∏–Ω–≥ —É—á–∞—Å–Ω–∏–∫—ñ–≤ Predator Fest League. –ì–æ–ª–æ–≤–Ω–∏–π –ø—Ä–∏–∑ - 23 Shimano Vanquish 2500S!
            </p>
          </div>
          <div class="fests-header__actions">
            <button class="btn" id="reloadLeaderboard" type="button">–û–Ω–æ–≤–∏—Ç–∏</button>
          </div>
        </header>

        <article class="card leaderboard-card">
          <div id="outLeaderboard">
            <!-- Skeleton loader (from index_old.html) -->
            <div class="lb-skeleton">
              <!-- Podium skeleton -->
              <div class="lb-skel-podium-wrap">
                <div class="lb-skel-people">
                  <!-- place 2 -->
                  <div class="lb-skel-person p2">
                    <div class="skel-w lb-skel-avatar" style="width:68px;height:68px;"></div>
                    <div class="skel-w lb-skel-name1" style="width:58px;"></div>
                    <div class="skel-w lb-skel-name2" style="width:44px;"></div>
                    <div class="skel-w lb-skel-pts" style="width:52px;"></div>
                  </div>
                  <!-- place 1 -->
                  <div class="lb-skel-person p1">
                    <div class="skel-w lb-skel-crown"></div>
                    <div class="skel-w lb-skel-avatar" style="width:80px;height:80px;"></div>
                    <div class="skel-w lb-skel-name1" style="width:68px;"></div>
                    <div class="skel-w lb-skel-name2" style="width:52px;"></div>
                    <div class="skel-w lb-skel-pts" style="width:56px;"></div>
                  </div>
                  <!-- place 3 -->
                  <div class="lb-skel-person p3">
                    <div class="skel-w lb-skel-avatar" style="width:56px;height:56px;"></div>
                    <div class="skel-w lb-skel-name1" style="width:52px;"></div>
                    <div class="skel-w lb-skel-name2" style="width:40px;"></div>
                    <div class="skel-w lb-skel-pts" style="width:48px;"></div>
                  </div>
                </div>
                <div class="lb-skel-stands">
                  <div class="skel-w lb-skel-stand s2"></div>
                  <div class="skel-w lb-skel-stand s1"></div>
                  <div class="skel-w lb-skel-stand s3"></div>
                </div>
              </div>
              <!-- Table rows skeleton -->
              <div class="lb-skel-table">
                <div class="lb-skel-row">
                  <div class="skel lb-skel-cell" style="width:22px;height:22px;border-radius:50%;"></div>
                  <div class="skel lb-skel-cell" style="width:140px;height:14px;"></div>
                  <div class="skel lb-skel-cell" style="width:32px;height:14px;margin-left:auto;"></div>
                  <div class="skel lb-skel-cell" style="width:42px;height:14px;"></div>
                </div>
                <div class="lb-skel-row">
                  <div class="skel lb-skel-cell" style="width:22px;height:22px;border-radius:50%;"></div>
                  <div class="skel lb-skel-cell" style="width:120px;height:14px;"></div>
                  <div class="skel lb-skel-cell" style="width:32px;height:14px;margin-left:auto;"></div>
                  <div class="skel lb-skel-cell" style="width:42px;height:14px;"></div>
                </div>
                <div class="lb-skel-row">
                  <div class="skel lb-skel-cell" style="width:22px;height:22px;border-radius:50%;"></div>
                  <div class="skel lb-skel-cell" style="width:150px;height:14px;"></div>
                  <div class="skel lb-skel-cell" style="width:32px;height:14px;margin-left:auto;"></div>
                  <div class="skel lb-skel-cell" style="width:42px;height:14px;"></div>
                </div>
                <div class="lb-skel-row">
                  <div class="skel lb-skel-cell" style="width:22px;height:22px;border-radius:50%;"></div>
                  <div class="skel lb-skel-cell" style="width:130px;height:14px;"></div>
                  <div class="skel lb-skel-cell" style="width:32px;height:14px;margin-left:auto;"></div>
                  <div class="skel lb-skel-cell" style="width:42px;height:14px;"></div>
                </div>
                <div class="lb-skel-row">
                  <div class="skel lb-skel-cell" style="width:22px;height:22px;border-radius:50%;"></div>
                  <div class="skel lb-skel-cell" style="width:115px;height:14px;"></div>
                  <div class="skel lb-skel-cell" style="width:32px;height:14px;margin-left:auto;"></div>
                  <div class="skel lb-skel-cell" style="width:42px;height:14px;"></div>
                </div>
                <div class="lb-skel-row">
                  <div class="skel lb-skel-cell" style="width:22px;height:22px;border-radius:50%;"></div>
                  <div class="skel lb-skel-cell" style="width:138px;height:14px;"></div>
                  <div class="skel lb-skel-cell" style="width:32px;height:14px;margin-left:auto;"></div>
                  <div class="skel lb-skel-cell" style="width:42px;height:14px;"></div>
                </div>
                <div class="lb-skel-row">
                  <div class="skel lb-skel-cell" style="width:22px;height:22px;border-radius:50%;"></div>
                  <div class="skel lb-skel-cell" style="width:125px;height:14px;"></div>
                  <div class="skel lb-skel-cell" style="width:32px;height:14px;margin-left:auto;"></div>
                  <div class="skel lb-skel-cell" style="width:42px;height:14px;"></div>
                </div>
              </div>
            </div>
          </div>
        </article>

        <div class="leaderboard-pdf-cta" style="margin-top: 12px;">
          <a class="link-btn" id="pflPdfLink" href="assets/docs/predatorfest2026.pdf" rel="noopener">
            –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —É–º–æ–≤–∏ PFL 2026 üìù
          </a>
        </div>
      </section>

      <!-- ========== ARENA TAB ========== -->
      <section id="tab-arena" class="tab-content arena-empty" aria-label="Arena tab">
        <header class="fests-header">
          <div class="fests-header__text">
            <h1 class="page-title">Arena ‚≠êÔ∏è</h1>
            <p class="page-subtitle" id="subtitle-arena">
              –†–µ–π—Ç–∏–Ω–≥ —ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–º–∞–≥–∞–Ω—å —Ä—ñ–∑–Ω–∏—Ö —Ñ–æ—Ä–º–∞—Ç—ñ–≤ —Ç–∞ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω.
            </p>
          </div>
          <div class="fests-header__actions">
            <button class="btn" id="reloadArena" type="button">–û–Ω–æ–≤–∏—Ç–∏</button>
          </div>
        </header>

        <div class="fests-year-tags" id="arenaTags" style="display: none;"></div>
        <div id="arenaCards" style="display: none;"></div>

        <div class="empty-state" id="arenaEmptyState">
          <img src="./assets/imgs/pike.png" alt="Pike" width="160" height="160">
          <p class="empty-state__text" id="arenaEmptyText">
            –ó–∞—á–µ–∫–∞–π—Ç–µ –±—É–¥—å –ª–∞—Å–∫–∞...<br>–ï—Ö, –∑–∞—Ä–∞–∑ –±–∏ —è–∫–∏–π—Å—å —Ñ—é–∂–∏–Ω 2.5' ü§§
          </p>
        </div>
      </section>

      <!-- ========== PARTNERS TAB ========== -->
      <section id="tab-partners" class="tab-content" aria-label="Partners tab">
        <div id="partnersListView">
          <h1 class="page-title">Partners ü§ù</h1>
          <p class="page-subtitle">
            –ü–∞—Ä—Ç–Ω–µ—Ä–∏ —Ç–∞ —Å–ø–æ–Ω—Å–æ—Ä–∏, —è–∫—ñ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å Predator Fest League –ø—Ä–∏–∑–∞–º–∏ —Ç–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –≤ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó.
          </p>

          <div class="partners-grid">
            <!-- Upstream -->
            <article class="partner-tile" 
                     data-partner="upstream"
                     data-instagram="https://www.instagram.com/upstreambaits/"
                     data-details-subtitle="üì¶ –û–Ω–ª–∞–π–Ω-–∑–∞–º–æ–≤–ª–µ–Ω–Ω—è —Ü—ñ–ª–æ–¥–æ–±–æ–≤–æ.<br>üïò –ü–Ω ‚Äì –ü—Ç –∑ 10:00 –¥–æ 18:00<br>üì± –¢–µ–ª–µ—Ñ–æ–Ω: +38 (067) 13 13 110">
              <div class="partner-tile__logo">
                <img src="./assets/logos/upstream.svg" alt="Upstream" 
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="logo-fallback">Upstream</div>
              </div>
              <div class="partner-tile__body">
                <h2 class="partner-title">Upstream</h2>
                <p class="partner-subtitle">–°–∏–ª—ñ–∫–æ–Ω–æ–≤—ñ –ø—Ä–∏–º–∞–Ω–∫–∏</p>
                <a class="link-btn" href="https://upstreambaits.com/shop/" target="_blank" rel="noopener">
                  –í –º–∞–≥–∞–∑–∏–Ω üêü
                </a>
              </div>
            </article>

            <!-- M5Craft -->
            <article class="partner-tile"
                     data-partner="m5craft"
                     data-instagram="https://www.instagram.com/megaklev.com.ua"
                     data-details-subtitle="–ê–≤—Ç–æ—Ä—Å—å–∫—ñ –ø—Ä–∏–º–∞–Ω–∫–∏ M5Craft –Ω–∞ Megaklev ‚Äî —Ä—É—á–Ω–∞ —Ä–æ–±–æ—Ç–∞ —Ç–∞ –ª—ñ–º—ñ—Ç–Ω—ñ —Å–µ—Ä—ñ—ó.">
              <div class="partner-tile__logo">
                <span class="partner-discount-tag">-10%</span>
                <img src="./assets/logos/m5craft.svg" alt="M5Craft"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="logo-fallback">M5Craft</div>
              </div>
              <div class="partner-tile__body">
                <h2 class="partner-title">M5Craft</h2>
                <p class="partner-subtitle">–ê–≤—Ç–æ—Ä—Å—å–∫—ñ –ø—Ä–∏–º–∞–Ω–∫–∏</p>
                <a class="link-btn" href="https://megaklev.com.ua/m5craft" target="_blank" rel="noopener">
                  –í –º–∞–≥–∞–∑–∏–Ω üêü
                </a>
              </div>
            </article>

            <!-- Crazy Fish -->
            <article class="partner-tile"
                     data-partner="crazyfish"
                     data-instagram="https://www.instagram.com/crazy_fish_official/"
                     data-details-subtitle="–û—Ñ—ñ—Ü—ñ–π–Ω–∏–π —Å–∞–π—Ç Crazy Fish ‚Äî —Å–∏–ª—ñ–∫–æ–Ω —ñ —Å–Ω–∞—Å—Ç—ñ –¥–ª—è —É–ª—å—Ç—Ä–∞–ª–∞–π—Ç—É —Ç–∞ –¥–∂–∏–≥—É.">
              <div class="partner-tile__logo">
                <img src="./assets/logos/crazyfish.png" alt="Crazy Fish"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="logo-fallback">Crazy Fish</div>
              </div>
              <div class="partner-tile__body">
                <h2 class="partner-title">Crazy Fish</h2>
                <p class="partner-subtitle">–°–∏–ª—ñ–∫–æ–Ω–æ–≤—ñ –ø—Ä–∏–º–∞–Ω–∫–∏</p>
                <a class="link-btn" href="https://crazyfish.com.ua/ua/" target="_blank" rel="noopener">
                  –í –º–∞–≥–∞–∑–∏–Ω üêü
                </a>
              </div>
            </article>

            <!-- The Main Barbershop -->
            <article class="partner-tile"
                     data-partner="themain"
                     data-instagram="https://www.instagram.com/the_main_barbershop/"
                     data-details-subtitle="–ë–∞—Ä–±–µ—Ä—à–æ–ø The Main ‚Äî —Å—Ç—Ä–∏–∂–∫–∏, –±–æ—Ä–æ–¥–∞ —Ç–∞ –≥–æ–ª—ñ–Ω–Ω—è. –ó–∞–ø–∏—Å —á–µ—Ä–µ–∑ Instagram.">
              <div class="partner-tile__logo">
                <img src="./assets/logos/themain.svg" alt="The Main Barbershop"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="logo-fallback">The Main</div>
              </div>
              <div class="partner-tile__body">
                <h2 class="partner-title">The Main Barbershop</h2>
                <p class="partner-subtitle">–ß–æ–ª–æ–≤—ñ—á—ñ —Å—Ç—Ä–∏–∂–∫–∏ | –ì–æ–ª—ñ–Ω–Ω—è</p>
                <a class="link-btn" href="https://www.instagram.com/the_main_barbershop/" target="_blank" rel="noopener">
                  –í instagram üì∏
                </a>
              </div>
            </article>
          </div>
        </div>

        <!-- Partner Details View (hidden by default) -->
        <div id="partnerDetailsView" class="partner-details"></div>
      </section>

    </main>
  </div>

  <!-- Bottom Tab Bar -->
  <nav class="tabs" role="tablist" aria-label="Main navigation">
    <button class="tab-btn active" data-tab="fests" role="tab" aria-selected="true">
      <span class="tab-icon">üé£</span>
      <span class="tab-label">Fests</span>
    </button>
    <button class="tab-btn" data-tab="leaderboard" role="tab" aria-selected="false">
      <span class="tab-icon">üèÜ</span>
      <span class="tab-label">Leaderboard</span>
    </button>
    <button class="tab-btn" data-tab="partners" role="tab" aria-selected="false">
      <span class="tab-icon">ü§ù</span>
      <span class="tab-label">Partners</span>
    </button>
    <button class="tab-btn" data-tab="arena" role="tab" aria-selected="false">
      <span class="tab-icon">‚≠êÔ∏è</span>
      <span class="tab-label">Arena</span>
    </button>
  </nav>

  <!-- Back FAB (for partner details) -->
  <button id="fabBack" class="fab-back" type="button" aria-label="Back">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
      <path d="M10.293 5.293a1 1 0 011.414 1.414L7.414 11H19a1 1 0 110 2H7.414l4.293 4.293a1 1 0 01-1.414 1.414l-6-6a1 1 0 010-1.414l6-6z" fill="currentColor"/>
    </svg>
  </button>

  <!-- Badge theme script -->
  <script>
    (function(){
      function updateBadge(){
        var img = document.getElementById('badgeImg');
        if(!img) return;
        var isDark = document.documentElement.getAttribute('data-theme') === 'dark';
        img.src = isDark ? 'assets/imgs/badge_dark.png' : 'assets/imgs/badge_light.png';
      }
      updateBadge();
      var obs = new MutationObserver(updateBadge);
      obs.observe(document.documentElement, { attributes: true, attributeFilter: ['data-theme'] });
    })();
  </script>

  <!-- Main App Script -->
  <script type="module" src="js/app.js"></script>

</body>
</html>
